(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e536"],{d4a1:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-page default-page"},[e.isShowHeader?s("header",[s("van-nav-bar",{attrs:{title:"Sign in",fixed:"",placeholder:""}})],1):e._e(),s("section",{staticClass:"login-page-body"},[s("h2",{staticClass:"vip-doc-block__title"},[e._v("Welcome")]),s("div",{ref:"login_form"},[s("van-field",{attrs:{readonly:"",name:"picker",value:e.countryCodeText,label:"Country",placeholder:"Please select country code"}}),s("van-field",{attrs:{name:"telephone",type:"tel",label:"Telephone",placeholder:"Please enter telephone",rules:[{validator:e.validator,message:"Only numbers allowed"}]},on:{blur:e.checkIsNeedConfirmPassword},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}}),s("van-field",{attrs:{name:"password",type:"password",label:"Password",placeholder:"Please enter password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.isNeedConfirmPassword?s("van-field",{attrs:{name:"confirm_password",type:"password",label:"Confirm Password",placeholder:"Please confirm password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}}):e._e(),s("van-field",{attrs:{name:"checkbox"},scopedSlots:e._u([{key:"input",fn:function(){return[s("van-checkbox",{attrs:{"checked-color":"#07c160"},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}},[e._v(" I have read and agreed to the "),s("span",{staticClass:"red",on:{click:function(t){return t.stopPropagation(),e.toTermsPage(t)}}},[e._v("Terms & Conditions")])])]},proxy:!0}])}),s("div",{staticClass:"vip-btn-wrap"},[s("van-button",{staticClass:"vip-btn",attrs:{type:"primary",disabled:e.isSubmitting,loading:e.isSubmitting,"loading-text":"Submitting...",block:""},on:{click:e.onSubmit}},[e._v("Login / Registration")]),e._m(0),s("div",{staticClass:"login-forgot-password text-right"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){return t.preventDefault(),e.toResetPasswordPage(t)}}},[e._v("Forgot your password?")])])],1)],1)])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-tips text-right"},[s("p",[e._v("Unregistered users will automatically create accounts")])])}],r=(s("b0c0"),s("d3b7"),s("ac1f"),s("5319"),s("c24f")),a={data:function(){return{countryCodeText:"India 0091",countryCode:"0091",columns:[],showPicker:!1,telephone:"",password:"",confirm_password:"",isNeedConfirmPassword:!0,code:"",codekey:"",checkbox:!0,isGetting:!1,gettingText:"",count:60,COUNT_DEFAULT:60,isSubmitting:!1}},created:function(){},computed:{isShowHeader:function(){var e=this.$route,t=e.meta;return t.showHeader}},methods:{onConfirm:function(e){this.countryCode=e.intl_code,this.countryCodeText=e.text,this.showPicker=!1},onSubmit:function(){var e=this;if(!this.telephone)return this.$toast("Please enter telephone"),!1;if(!this.password)return this.$toast("Please enter password"),!1;if(this.isNeedConfirmPassword){if(!this.confirm_password)return this.$toast("Please confirm password"),!1;if(this.password!=this.confirm_password)return this.$toast("The password doesn't match."),!1}this.isSubmitting=!0;var t={device_number:this.$store.getters.deviceNumber,platform:this.$store.getters.platform,app_version_id:this.$store.getters.appVersionId,phone_number:this.telephone,password:this.password};this.isNeedConfirmPassword&&(t.confirm_password=this.confirm_password),this.$store.dispatch("user/login",t).then((function(t){var s=t.data;e.isSubmitting=!1,s&&e.toNextPage()})).catch((function(){e.isSubmitting=!1}))},toNextPage:function(){var e=this;this.$store.dispatch("user/getInfo").then((function(t){var s=t.name,o=t.is_member;s?o?e.toEndPage():e.toVipPage():e.toInfoPage()}))},toEndPage:function(){this.$router.push({name:"end"})},toInfoPage:function(){this.$router.push({name:"info"})},toVipPage:function(){this.$router.replace({name:"vip"})},toCodePage:function(){this.$router.push({name:"code",params:{telephone:this.telephone,countryCode:this.countryCode}})},toTermsPage:function(){this.$router.push({name:"terms"})},validator:function(e){return/^[0-9]*$/.test(e)},checkIsNeedConfirmPassword:function(){this.telephone&&this.queryPassword()},queryPassword:function(){var e=this;return new Promise((function(t,s){var o={phone_number:e.telephone};Object(r["f"])(o).then((function(t){var s=t.data;e.isNeedConfirmPassword="Y"!=s.has_pwd}))}))},toResetPasswordPage:function(){this.$router.push({name:"resetPassword"})}}},i=a,c=s("2877"),d=Object(c["a"])(i,o,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d21e536.cdab4676.js.map