(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76fcc8a1"],{b0c02:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"default-page set-avatar-page"},[t.isShowHeader?i("header",[i("van-nav-bar",{attrs:{title:"Thay đổi Avatar",fixed:"","left-arrow":"",placeholder:""},on:{"click-left":t.onClickLeft}})],1):t._e(),i("section",{staticClass:"page-body"},[i("van-form",{on:{submit:t.onSubmit}},[i("van-field",{attrs:{name:"uploader",label:"Hình ảnh"},scopedSlots:t._u([{key:"input",fn:function(){return[i("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":1},model:{value:t.fileList,callback:function(a){t.fileList=a},expression:"fileList"}})]},proxy:!0}])}),i("div",{staticClass:"vip-btn-wrap"},[i("van-button",{staticClass:"vip-btn",attrs:{type:"primary",disabled:t.isSubmitting,loading:t.isSubmitting,"loading-text":"Đệ trình...","native-type":"submit",block:""}},[t._v(" Tiết kiệm ")])],1)],1)],1),i("footer",{staticClass:"page-footer"})])},n=[],s=i("c24f"),r={data:function(){return{avatar:"",avatarId:"",fileList:[],isSubmitting:!1}},created:function(){this.avatar=this.userInfo.avatar||""},computed:{isShowHeader:function(){var t=this.$route,a=t.meta;return a.showHeader},userInfo:function(){return this.$store.getters.info}},methods:{onClickLeft:function(){this.$router.go(-1)},afterRead:function(t){var a=this;t.status="uploading",t.message="tải lên...";var i=new FormData;i.append("type","avatar"),i.append("image",t.file),Object(s["j"])(i).then((function(i){t.status="done";var e=i.data;a.avatar=e.path,a.avatarId=e.id})).catch((function(){t.status="failed",t.message="thất bại"}))},onSubmit:function(){var t=this;if(!this.avatarId)return this.$toast("Vui lòng chọn hình ảnh"),!1;this.isSubmitting=!0,Object(s["i"])({avatar_image_id:this.avatarId}).then((function(a){var i=a.data;t.$store.dispatch("user/setInfo",i),t.isSubmitting=!1,t.$toast("Gửi thành công")})).catch((function(a){t.isSubmitting=!1}))}}},o=r,u=i("2877"),c=Object(u["a"])(o,e,n,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-76fcc8a1.c4bea637.js.map