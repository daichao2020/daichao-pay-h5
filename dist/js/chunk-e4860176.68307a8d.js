(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4860176"],{"00f5":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"default-page status-page page"},[1==t.pageShow?e("section",{staticClass:"msg-waiting"},[e("div",{staticClass:"pay-msg"},[e("div",{staticClass:"pay-msg__icon-area"},[e("van-circle",{ref:"circle",staticClass:"flex",attrs:{rate:t.rate,speed:100,"stroke-width":60,color:"#82ccdd","layer-color":"#eee",size:"240px"},model:{value:t.currentRate,callback:function(a){t.currentRate=a},expression:"currentRate"}},[e("van-count-down",{ref:"countDown",staticClass:"flex-1",attrs:{time:t.time,"auto-start":"",format:"ss"},on:{change:t.setCircleRate}})],1)],1),e("div",{staticClass:"pay-msg__text-area",staticStyle:{padding:"0 0.3rem"}},[e("h2",{staticClass:"pay-msg__title"},[t._v(t._s(t.$t("str.waitingForYourPayment")))]),e("p",{staticClass:"pay-msg__desc text-left"},[e("van-cell-group",[e("van-cell",{attrs:{title:t.$t("str.amount"),value:t.$t("str.unit")+t.order.amount}}),e("van-cell",{attrs:{title:t.$t("str.bankCode"),value:t.order.bank_code}}),e("van-cell",{attrs:{title:t.$t("str.accountNo"),value:t.order.account_no}}),e("van-cell",{attrs:{title:t.$t("str.accountName"),value:t.order.account_name}})],1)],1)])])]):t._e(),2==t.pageShow?e("section",{staticClass:"msg-success"},[e("div",{staticClass:"pay-msg"},[e("div",{staticClass:"pay-msg__icon-area"},[e("van-icon",{staticClass:"pay-icon_msg pay-icon-success",attrs:{name:"checked"}})],1),e("div",{staticClass:"pay-msg__text-area"},[e("h2",{staticClass:"pay-msg__title"},[t._v(t._s(t.$t("str.paymentIsSuccessful")))]),e("p",{staticClass:"pay-msg__desc"})]),e("div",{staticClass:"pay-msg__opr-area"},[e("div",{staticClass:"vip-btn-wrap"},[e("van-button",{staticClass:"vip-btn",attrs:{type:"primary",block:""},on:{click:t.toEndPage}},[t._v(t._s(t.$t("str.next")))])],1)])])]):t._e(),3==t.pageShow?e("section",{staticClass:"msg-warn"},[e("div",{staticClass:"pay-msg"},[e("div",{staticClass:"pay-msg__icon-area"},[e("van-icon",{staticClass:"pay-icon_msg pay-icon-fail",attrs:{name:"warning"}})],1),e("div",{staticClass:"pay-msg__text-area"},[e("h2",{staticClass:"pay-msg__title"},[t._v(t._s(t.$t("str.paymentIsFailed")))])]),e("div",{staticClass:"pay-msg__opr-area"},[e("div",{staticClass:"vip-btn-wrap"},[e("van-button",{staticClass:"vip-btn",attrs:{type:"default",block:""},on:{click:t.toLastPage}},[t._v(t._s(t.$t("str.back")))])],1)])])]):t._e()])},n=[],r=e("f8b7"),c={data:function(){return{pageShow:1,time:3e5,rate:100,currentRate:0,payStatus:40003,payStatusTxt:this.$t("str.checkingPaymentStatus"),seconds:300,orderAccount:null}},mounted:function(){this.getOrderPayAccount()},computed:{order:function(){return this.orderAccount?this.orderAccount:this.$store.getters.order}},methods:{onClickLeft:function(){this.$router.go(-1)},getOrderPayAccount:function(){var t=this;Object(r["d"])().then((function(a){var e=a.data;t.orderAccount=e}))},setCircleRate:function(t){this.seconds=60*t.minutes+t.seconds,this.rate=(300-this.seconds)/300*100,40003!=this.payStatus&&40004!=this.payStatus||t.seconds%5!=0||this.queryOrderPayStatus()},queryOrderPayStatus:function(){var t=this,a=this.order.order_id;Object(r["e"])(a).then((function(a){var e=a.data;switch(e.status){case 40001:t.$refs.countDown.pause(),t.payStatusTxt=a.data.message,t.payStatus=e.status,t.pageShow=2;try{Adjust.trackEvent(paySuccessEvent)}catch(s){}setTimeout((function(){t.toEndPage()}),1e3);break;case 40002:t.$refs.countDown.pause(),t.payStatusTxt=a.data.message,t.payStatus=e.status,t.pageShow=3;try{Adjust.trackEvent(payFailEvent)}catch(s){}break;case 40004:case 40003:0==t.seconds&&t.$refs.countDown.reset(),t.payStatus=e.status,t.pageShow=1;break;default:t.payStatusTxt=a.data.message,t.payStatus=e.status,t.pageShow=3;break}})).catch((function(){t.pageShow=3}))},toEndPage:function(){this.$router.push({name:"end"})},toVipPage:function(){this.$router.push({name:"vip"})},toLastPage:function(){switch(this.payStatus){case 40002:this.toVipPage();break;case 40004:this.toVipPage();break;default:this.toVipPage();break}}}},i=c,o=(e("c87a"),e("2877")),u=Object(o["a"])(i,s,n,!1,null,"28f64178",null);a["default"]=u.exports},c87a:function(t,a,e){"use strict";var s=e("e6a6"),n=e.n(s);n.a},e6a6:function(t,a,e){},f8b7:function(t,a,e){"use strict";e.d(a,"a",(function(){return n})),e.d(a,"b",(function(){return r})),e.d(a,"f",(function(){return c})),e.d(a,"g",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"e",(function(){return u})),e.d(a,"d",(function(){return d}));var s=e("b775");function n(){return Object(s["a"])({url:"/member/cards",method:"get"})}function r(){return Object(s["a"])({url:"/payment/channels",method:"get"})}function c(t){return Object(s["a"])({url:"/member/orders",method:"post",data:t})}function i(t){return Object(s["a"])({url:"/member/orders/oddPay",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/orders/".concat(t.order_id,"/mpurse"),method:"post",data:t})}function u(t){return Object(s["a"])({url:"/payment/oddPay/return",method:"get",params:{order_id:t}})}function d(){return Object(s["a"])({url:"/member/oddPay/account",method:"get"})}}}]);
//# sourceMappingURL=chunk-e4860176.68307a8d.js.map