(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76fcc8a1"],{b0c02:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"default-page set-avatar-page"},[t.isShowHeader?e("header",[e("van-nav-bar",{attrs:{title:"Modify Head Portrait",fixed:"","left-arrow":"",placeholder:""},on:{"click-left":t.onClickLeft}})],1):t._e(),e("section",{staticClass:"page-body"},[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"uploader",label:"Image"},scopedSlots:t._u([{key:"input",fn:function(){return[e("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":1},model:{value:t.fileList,callback:function(a){t.fileList=a},expression:"fileList"}})]},proxy:!0}])}),e("div",{staticClass:"vip-btn-wrap"},[e("van-button",{staticClass:"vip-btn",attrs:{type:"primary",disabled:t.isSubmitting,loading:t.isSubmitting,"loading-text":"Submitting...","native-type":"submit",block:""}},[t._v(" Save ")])],1)],1)],1),e("footer",{staticClass:"page-footer"})])},n=[],s=e("c24f"),r={data:function(){return{avatar:"",avatarId:"",fileList:[],isSubmitting:!1}},created:function(){this.avatar=this.userInfo.avatar||""},computed:{isShowHeader:function(){var t=this.$route,a=t.meta;return a.showHeader},userInfo:function(){return this.$store.getters.info}},methods:{onClickLeft:function(){this.$router.go(-1)},afterRead:function(t){var a=this;t.status="uploading",t.message="uploading...";var e=new FormData;e.append("type","avatar"),e.append("image",t.file),Object(s["j"])(e).then((function(e){t.status="done";var i=e.data;a.avatar=i.path,a.avatarId=i.id})).catch((function(){t.status="failed",t.message="failed"}))},onSubmit:function(){var t=this;if(!this.avatarId)return this.$toast("Please select image"),!1;this.isSubmitting=!0,Object(s["i"])({avatar_image_id:this.avatarId}).then((function(a){var e=a.data;t.$store.dispatch("user/setInfo",e),t.isSubmitting=!1,t.$toast("Submit successfully")})).catch((function(a){t.isSubmitting=!1}))}}},o=r,u=e("2877"),c=Object(u["a"])(o,i,n,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-76fcc8a1.9b8ecb52.js.map